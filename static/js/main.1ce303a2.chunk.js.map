{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/api.js","components/Login.js","components/Register.js","images/Union.svg","images/Union-fail.svg","components/InfoToolTip.js","components/SignOut.js","components/ProtectedRoute.js","components/App.js","utils/auth.js","reportWebVitals.js","index.js"],"names":["Header","props","className","src","logo","alt","children","CurrentUserContext","createContext","Card","item","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","type","onClick","onCardDelete","link","name","onCardLike","length","Main","onEditAvatar","console","log","avatar","aria-label","onEditProfile","about","onAddPlace","cards","map","onCardClick","handleCardLike","handleCardDelete","Footer","PopupWithForm","title","isOpen","onClose","onSubmit","opened","id","form","EditProfilePopup","useEffect","setName","setDescription","useState","description","value","onChange","e","target","placeholder","required","noValidate","minLength","maxLength","preventDefault","onUpdateUser","EditAvatarPopup","avatarInput","useRef","ref","onUpdateAvatar","current","AddPlacePopup","setLink","ImagePopup","selectedCard","card","api","option","this","_url","baseUrl","_headers","headers","fetch","method","then","_checkResponse","data","body","JSON","stringify","url","res","ok","json","Promise","reject","status","authorization","Login","email","setEmail","password","setPassword","to","handleLogin","Register","handleRegister","InfoToolTip","isLogOutPopupOpen","history","useHistory","popupError","logoFail","logoSuccess","textFail","textSuccess","pushLoc","closeAllPopups","push","SignOut","shown","userEmail","handleLogOutClick","ProtectedRoute","Component","component","loggedIn","App","setLoggedIn","setCurrentUser","setCards","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","setIsLogOutPopupOpen","setSelectedCard","setUserEmail","setPopupError","tokenCheck","localStorage","getItem","token","authTokenCheck","catch","err","removeItem","getCards","getUserInfo","Provider","path","exact","removeLike","newCard","state","c","addLike","deleteCard","filter","updateUserInfo","updateUserAvatar","addNewCard","login","setItem","register","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1ce303a2.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.bbe2a6ea.svg\";","import { Link } from 'react-router-dom';\r\nimport logo from '../images/logo.svg';\r\nimport './Header.css';\r\n\r\nfunction Header(props) {\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <img className=\"header__logo\" src={logo} alt=\"Лого сайта: Место\" />\r\n      {props.children}\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header;","import { createContext } from 'react';\r\nexport const CurrentUserContext = createContext();","import './Card.css'\r\nimport { useContext } from 'react'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(item) {\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n    const isOwn = item.item.owner._id === currentUser._id;\r\n\r\n    const isLiked = item.item.likes.some(i => i._id === currentUser._id);\r\n\r\n    function handleDeleteClick(){\r\n        item.onCardDelete(item.item)\r\n    }\r\n\r\n    function handleLikeClick() {\r\n        item.onCardLike(item.item)\r\n    }\r\n\r\n    function handleClick() {\r\n        item.props(item.item);\r\n    }\r\n\r\n    return (\r\n        <article className=\"element\">\r\n            <button className={`${ isOwn ? \"element__delete\" : \"element__delete_hidden\"}`} type=\"button\" onClick={handleDeleteClick}></button>\r\n            <img className=\"element__image\" src={item.item.link} alt={item.item.name} onClick={handleClick}/>\r\n            <h2 className=\"element__title\">{item.item.name}</h2>\r\n            <div className=\"element__like_container\">\r\n                <button className={`element__button ${ isLiked ? \"element__button_active\" : ''}`} type=\"button\" onClick={handleLikeClick}></button>\r\n                <p className=\"element__likes\">{item.item.likes.length}</p>\r\n            </div>\r\n        </article>\r\n    )\r\n}\r\n\r\nexport default Card","import './Main.css'\r\nimport { useContext } from 'react';\r\nimport Card from './Card.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const onAddPlace = () => {\r\n    props.onAddPlace()\r\n    console.log('clicked onAddPlace')\r\n  }\r\n\r\n  const onEditProfile = () => {\r\n    props.onEditProfile()\r\n    console.log('clicked onEditProfile')\r\n  }\r\n\r\n  const onEditAvatar = () => {\r\n    props.onEditAvatar()\r\n    console.log('clicked onEditAvatar')\r\n  }\r\n  \r\n  return (\r\n    <main className=\"main\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__container\">\r\n          <button type=\"button\" className=\"profile__edit-button\" onClick={onEditAvatar}></button>\r\n          <img className=\"profile__picture\" src={currentUser.avatar} alt=\"Аватар пользователя\" />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n          <button aria-label=\"кнопка редактировать\" className=\"profile__button\" type=\"button\" onClick={onEditProfile}></button>\r\n          <div className=\"profile__brake\"></div>\r\n          <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n        </div>\r\n        <button className=\"profile__add-button\" type=\"button\" onClick={onAddPlace}></button>\r\n      </section>\r\n      <section className=\"elements\">\r\n        {\r\n          props.cards.map((item) => (\r\n            <Card key={item._id} item={item} props={props.onCardClick} onCardLike={props.handleCardLike} onCardDelete={props.handleCardDelete} />\r\n            )\r\n          )\r\n        }\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Main","import './Footer.css'\r\n\r\nfunction Footer() {\r\n    return(\r\n      <footer className=\"footer\">\r\n        <p className=\"footer__copyright\">&copy; 2020 Селюнин Станислав</p>\r\n      </footer>\r\n    )\r\n}\r\n\r\nexport default Footer","import './PopupWithForm.css';\r\n\r\nfunction PopupWithForm({title, name, children, isOpen, onClose, onSubmit}) {\r\n    let opened = ''\r\n    if(isOpen){\r\n        opened = 'popup_opened'\r\n    } \r\n\r\n    return (\r\n        <div className={`popup popup_${name} ${opened}`}>\r\n            <div className=\"popup__container\">\r\n                <h2 className=\"popup__title\">{title}</h2>\r\n                <form className=\"popup__form\" id={name} name={name} onSubmit={onSubmit}>\r\n                    {children}\r\n                    <button form={name} className=\"popup__button\" type=\"submit\">Сохранить</button>\r\n                </form>\r\n                <button className=\"popup__close\" type=\"button\" onClick={onClose}></button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PopupWithForm","import { useState, useContext, useEffect } from 'react';\r\n\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction EditProfilePopup(props) {\r\n\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n    useEffect(() => {\r\n        setName(currentUser.name || '');\r\n        setDescription(currentUser.about || '');\r\n    }, [currentUser]);\r\n\r\n    const [name, setName] = useState('')\r\n    const [description, setDescription] = useState('')\r\n\r\n    function handleNameInput(e){\r\n        setName(e.target.value)\r\n    }\r\n\r\n    function handleDescriptionInput(e){\r\n        setDescription(e.target.value)\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        // Передаём значения управляемых компонентов во внешний обработчик\r\n        props.onUpdateUser({\r\n          name: name,\r\n          about: description,\r\n        });\r\n    } \r\n\r\n    return (\r\n        <PopupWithForm title={'Редактировать профиль'} name={'edit'} children={\r\n            <>\r\n                <input className=\"popup__input\" value={name} onChange={handleNameInput} type=\"text\" id=\"name__input\" name=\"name\" placeholder=\"Ваше имя\" required noValidate minLength=\"2\" maxLength=\"40\" />\r\n                <span className=\"popup__input-error\" id=\"name__input_error\"></span>\r\n                <input className=\"popup__input\" value={description} onChange={handleDescriptionInput} type=\"text\" id=\"job__input\" name=\"about\" placeholder=\"Чем занимаетесь?\" required noValidate minLength=\"2\" maxLength=\"200\" />\r\n                <span className=\"popup__input-error\" id=\"job__input_error\"></span>\r\n            </>\r\n        } isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}/>\r\n    )\r\n}\r\n\r\nexport default EditProfilePopup","import { useRef } from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction EditAvatarPopup(props) {\r\n\r\n    const avatarInput = useRef();\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        \r\n        props.onUpdateAvatar(avatarInput.current.value,);\r\n    };\r\n\r\n    return (\r\n        <PopupWithForm title={'Обновить аватар'} name={'edit-avatar'} children={\r\n            <>\r\n                <input ref={avatarInput} className=\"popup__input\" type=\"url\" id=\"avatar__name_input\" name=\"avatar\" placeholder=\"Ссылка на картинку\" required />\r\n                <span className=\"popup__input-error\" id=\"avatar__name_input_error\"></span>\r\n            </>\r\n        } isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit} />\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup","import { useState } from 'react'\r\n\r\nimport PopupWithForm from './PopupWithForm.js'\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n    const [name, setName] = useState('')\r\n    const [link, setLink] = useState('')\r\n    \r\n    function handleNameChange(e){\r\n        setName(e.target.value)\r\n    }\r\n\r\n    function handleLinkChange(e){\r\n        setLink(e.target.value)\r\n    }\r\n\r\n    function handleSubmit(e){\r\n        e.preventDefault();\r\n\r\n        props.onAddPlace({\r\n            name: name,\r\n            link: link,\r\n        })\r\n\r\n        setName('');\r\n        setLink('');\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm title={'Новое место'} name={'add-card'} isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\r\n            <>\r\n                <input className=\"popup__input\" value={name} onChange={handleNameChange} type=\"text\" id=\"card__name_input\" name=\"name\" placeholder=\"Название\" required minLength=\"2\" maxLength=\"30\" />\r\n                <span className=\"popup__input-error\" id=\"card__name_input_error\"></span>\r\n                <input className=\"popup__input\" value={link} onChange={handleLinkChange} type=\"url\" id=\"img__src_input\" name=\"link\" placeholder=\"Ссылка на картинку\" required />\r\n                <span className=\"popup__input-error\" id=\"img__src_input_error\"></span>\r\n            </>\r\n         </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup","import './ImagePopup.css';\r\n\r\nfunction ImagePopup(selectedCard) {\r\n    let opened = ''\r\n    if(selectedCard.card.link){\r\n        opened = 'popup_opened'\r\n    } \r\n    \r\n    return (\r\n        <div className={`popup popup_image ${opened}`}>\r\n            <div className=\"popup__image-container\">\r\n                <img className=\"popup__image\" src={selectedCard.card.link} alt=\"placeholder\" />\r\n                <button className=\"popup__close\" type=\"button\" onClick={selectedCard.onClose}></button>\r\n                <h2 className=\"popup__image-title\">{selectedCard.card.name}</h2>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImagePopup","class Api {\r\n    constructor(option){\r\n\r\n    this._url = option.baseUrl\r\n    this._headers = option.headers\r\n    }\r\n\r\n    getUserInfo(){\r\n        return fetch(`${this._url}/users/me`, {\r\n            method: \"GET\",\r\n            headers: this._headers\r\n        })\r\n        .then(this._checkResponse)\r\n    }\r\n\r\n    getCards(){\r\n        return fetch(`${this._url}/cards`, {\r\n            method: \"GET\",\r\n            headers: this._headers\r\n        })\r\n        .then(this._checkResponse)\r\n    }\r\n\r\n    updateUserInfo(data){\r\n        return fetch(`${this._url}/users/me`, {\r\n            method: \"PATCH\",\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: data.name,\r\n                about: data.about\r\n              })\r\n        })\r\n        .then(this._checkResponse)\r\n    }\r\n\r\n    addNewCard(data){\r\n        return fetch(`${this._url}/cards`, {\r\n            method: \"POST\",\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: data.name,\r\n                link: data.link\r\n              })\r\n        })\r\n        .then(this._checkResponse)\r\n    }\r\n\r\n    deleteCard(id){\r\n        return fetch(`${this._url}/cards/${id}`, {\r\n            method: \"DELETE\",\r\n            headers: this._headers\r\n        })\r\n        .then(this._checkResponse)\r\n    }\r\n\r\n    addLike(id){\r\n        return fetch(`${this._url}/cards/likes/${id}`, {\r\n            method: \"PUT\",\r\n            headers: this._headers\r\n        })  \r\n        .then(this._checkResponse)\r\n    }\r\n\r\n    removeLike(id){\r\n        return fetch(`${this._url}/cards/likes/${id}`, {\r\n            method: \"DELETE\",\r\n            headers: this._headers\r\n        })  \r\n        .then(this._checkResponse)\r\n    }\r\n\r\n    updateUserAvatar(url){\r\n        return fetch(`${this._url}/users/me/avatar`, {\r\n            method: \"PATCH\",\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                avatar: url,\r\n              })\r\n        })\r\n        .then(this._checkResponse)\r\n    }\r\n\r\n    _checkResponse(res) {\r\n        if (res.ok) {\r\n            return res.json();\r\n        }\r\n        return Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n    }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-20',\r\n  headers: {\r\n    authorization: '75314450-8bde-49f1-8e95-7ac1e831360d',\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\nexport default api\r\n","import './Login.css'\r\nimport { Link } from 'react-router-dom';\r\nimport { useState } from 'react';\r\nimport Header from './Header.js'\r\n\r\nfunction Login(props) {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n\r\n    function handleEmailChange(e){\r\n        setEmail(e.target.value);\r\n    }\r\n\r\n    function handlePasswordChange(e){\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e){\r\n        e.preventDefault();\r\n        props.handleLogin(email, password)\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Header>\r\n                <Link className=\"header__link\" to=\"/sign-up\">Регистрация</Link>\r\n            </Header>\r\n            <form onSubmit={handleSubmit} className=\"login login__form\">\r\n                <h1 className=\"login__title\">Вход</h1>\r\n                <input value={email} onChange={handleEmailChange} className=\"login__input\" type=\"email\" placeholder=\"Email\" required></input>\r\n                <input value={password} onChange={handlePasswordChange} className=\"login__input\" type=\"password\" placeholder=\"Пароль\" required></input>\r\n                <button className=\"login__button\" type=\"submit\">Войти</button>\r\n            </form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Login","import './Register.css'\r\nimport { Link } from 'react-router-dom';\r\nimport { useState } from 'react';\r\nimport Header from './Header.js'\r\n\r\n\r\n\r\nfunction Register(props) {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    function handleEmailChange(e) {\r\n        setEmail(e.target.value);\r\n    }\r\n\r\n    function handlePasswordChange(e) {\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault()\r\n        props.handleRegister(email, password)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header>\r\n                <Link className=\"header__link\" to=\"/sign-in\">Войти</Link>\r\n            </Header>\r\n            <form onSubmit={handleSubmit} className=\"register register__form\">\r\n                <h1 className=\"register__title\">Зарегистрироваться</h1>\r\n                <input onChange={handleEmailChange} value={email} className=\"register__input\" type=\"email\" placeholder=\"Email\" required></input>\r\n                <input onChange={handlePasswordChange} value={password} className=\"register__input\" type=\"password\" placeholder=\"Пароль\" required></input>\r\n                <button className=\"register__button\" type=\"submit\">Зарегистрироваться</button>\r\n                <Link className=\"register__text\" to=\"/sign-in\">Уже зарегистрированы? Войти</Link>\r\n            </form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Register","export default __webpack_public_path__ + \"static/media/Union.a9eb6caf.svg\";","export default __webpack_public_path__ + \"static/media/Union-fail.df8eddf6.svg\";","import './InfoToolTip.css'\r\nimport logoSuccess from '../images/Union.svg'\r\nimport logoFail from '../images/Union-fail.svg'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nfunction InfoToolTip(props) {\r\n    let opened = ''\r\n    if (props.isLogOutPopupOpen) {\r\n        opened = 'info_opened'\r\n    }\r\n\r\n    let history = useHistory();\r\n\r\n    function handleCloseClick() {\r\n        let pushLoc = ''\r\n        if (props.popupError){\r\n            pushLoc = '/sign-up'\r\n        } else {\r\n            pushLoc = '/sign-in'\r\n        }\r\n        props.closeAllPopups();\r\n        history.push(pushLoc)\r\n    }\r\n\r\n    return (\r\n        <div className={`info ${opened}`}>\r\n            <div className=\"info__container\">\r\n                <img className=\"info__logo\" src={props.popupError ? logoFail : logoSuccess} alt=\"Иконка 'успешная регистрация' или 'неудачная регистрация'\"></img>\r\n                <p className=\"info__text\">{props.popupError ? props.textFail : props.textSuccess}</p>\r\n                <button className=\"info__close\" type=\"button\" onClick={handleCloseClick}></button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default InfoToolTip","import { Link } from 'react-router-dom';\r\nimport './SignOut.css'\r\n\r\nfunction SignOut(props) {\r\n    let shown = ''\r\n    if(props.isLogOutPopupOpen){\r\n        shown = 'signout_shown'\r\n    }\r\n\r\n    return (\r\n        <div className={`signout ${shown}`}>\r\n            <p className=\"signout__email\">{props.userEmail}</p>\r\n            <Link onClick={props.handleLogOutClick} className=\"signout__button\" to=\"/sign-in\">Выйти</Link>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SignOut","import { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n    return (\r\n        <Route>\r\n            {() =>\r\n                props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n            }\r\n        </Route>\r\n    );\r\n};\r\n\r\nexport default ProtectedRoute;","import { useState, useEffect } from 'react';\r\nimport { Route, Switch, Redirect, useHistory, Link } from 'react-router-dom';\r\n\r\nimport Header from './Header.js';\r\nimport Main from './Main.js';\r\nimport Footer from './Footer.js';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport EditProfilePopup from './EditProfilePopup.js';\r\nimport EditAvatarPopup from './EditAvatarPopup.js';\r\nimport AddPlacePopup from './AddPlacePopup.js';\r\nimport ImagePopup from './ImagePopup.js';\r\nimport api from '../utils/api.js';\r\nimport { login } from '../utils/auth.js'\r\nimport { register } from '../utils/auth.js'\r\n\r\nimport Login from './Login.js';\r\nimport Register from './Register.js';\r\nimport InfoToolTip from './InfoToolTip.js';\r\nimport SignOut from './SignOut.js';\r\nimport ProtectedRoute from './ProtectedRoute.js';\r\nimport { authTokenCheck } from '../utils/auth.js'\r\n\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction App() {\r\n  let history = useHistory();\r\n  const [loggedIn, setLoggedIn] = useState(false)\r\n\r\n  const [currentUser, setCurrentUser] = useState({})\r\n  const [cards, setCards] = useState([])\r\n\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false)\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false)\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false)\r\n  const [isLogOutPopupOpen, setIsLogOutPopupOpen] = useState(false)\r\n\r\n  const [selectedCard, setSelectedCard] = useState({})\r\n\r\n  const [userEmail, setUserEmail] = useState('')\r\n\r\n  const [popupError, setPopupError] = useState(false)\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\r\n    if (!isLiked) {\r\n      api.addLike(card._id).then((newCard) => {\r\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c))\r\n      }).catch(err => console.log(`Что-то пошло не так: ${err}`));\r\n    } else {\r\n      api.removeLike(card._id).then((newCard) => {\r\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c))\r\n      }).catch(err => console.log(`Что-то пошло не так: ${err}`));\r\n    }\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api.deleteCard(card._id)\r\n      .then(setCards(cards.filter(item => item._id !== card._id)))\r\n      .catch(err => console.log(`Что-то пошло не так: ${err}`));\r\n  }\r\n\r\n  function handleAddPlaceSubmit(data) {\r\n    api.addNewCard(data)\r\n      .then((res) => {\r\n        setCards([res, ...cards]);\r\n        closeAllPopups()\r\n      })\r\n      .catch(err => console.log(`Что-то пошло не так: ${err}`));\r\n  }\r\n\r\n  function tokenCheck() {\r\n    if (localStorage.getItem('JWT')) {\r\n      const token = localStorage.getItem('JWT');\r\n      authTokenCheck(token)\r\n        .then((res) => {\r\n          if (res) {\r\n            setUserEmail(res.data.email)\r\n            setLoggedIn(true);\r\n            history.push('/content')\r\n          }\r\n        })\r\n        .catch(err => console.log(`Что-то пошло не так: ${err}`))\r\n    }\r\n  }\r\n\r\n  function handleLogOutClick() {\r\n    localStorage.removeItem('JWT');\r\n  }\r\n\r\n  function handleHeaderButtonClick() {\r\n    if (!isLogOutPopupOpen) {\r\n      setIsLogOutPopupOpen(true)\r\n    } else {\r\n      setIsLogOutPopupOpen(false)\r\n    }\r\n  }\r\n\r\n  function handleLogin(email, password) {\r\n    login(email, password)\r\n      .then((res) => {\r\n        if (res) {\r\n          setUserEmail(email)\r\n          localStorage.setItem('JWT', res.token)\r\n          setLoggedIn(true)\r\n          history.push('/content')\r\n        }\r\n      })\r\n  }\r\n\r\n  function handleRegister(email, password) {\r\n    register(email, password)\r\n      .then((res) => {\r\n        if (res) {\r\n          console.log(res)\r\n          setPopupError(false)\r\n          setLoggedIn(true)\r\n          setIsLogOutPopupOpen(true)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err)\r\n        if (err) {\r\n          console.log(err)\r\n          setPopupError(true)\r\n          setIsLogOutPopupOpen(true)\r\n        }\r\n        else {\r\n          setPopupError(false)\r\n        }\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    api.getCards()\r\n      .then(res => setCards(res))\r\n      .catch(err => console.log(`Что-то пошло не так: ${err}`))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    api.getUserInfo()\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n      })\r\n      .catch(err => console.log(`Что-то пошло не так: ${err}`))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    tokenCheck()\r\n  }, [])\r\n\r\n  const handleUpdateUser = (data) => {\r\n    api.updateUserInfo(data)\r\n      .then(res => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(`Что-то пошло не так: ${err}`));\r\n  }\r\n\r\n  const handleUpdateAvatar = (data) => {\r\n    api.updateUserAvatar(data)\r\n      .then(res => {\r\n        setCurrentUser(res)\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(`Что-то пошло не так: ${err}`))\r\n  }\r\n\r\n  const handleEditAvatarClick = () => {\r\n    setIsEditAvatarPopupOpen(true)\r\n  }\r\n\r\n  const handleEditProfileClick = () => {\r\n    setIsEditProfilePopupOpen(true)\r\n  }\r\n\r\n  const handleAddPlaceClick = () => {\r\n    setIsAddPlacePopupOpen(true)\r\n  }\r\n\r\n  const handleCardClick = (url) => {\r\n    setSelectedCard(url)\r\n  }\r\n\r\n  const closeAllPopups = () => {\r\n    setIsEditAvatarPopupOpen(false)\r\n    setIsEditProfilePopupOpen(false)\r\n    setIsAddPlacePopupOpen(false)\r\n    setIsLogOutPopupOpen(false)\r\n    setSelectedCard({})\r\n  }\r\n\r\n  return (\r\n    <div className=\"content\">\r\n      <CurrentUserContext.Provider value={currentUser}>\r\n        <Switch>\r\n          <Route path=\"/content\">\r\n            <SignOut userEmail={userEmail} isLogOutPopupOpen={isLogOutPopupOpen} handleLogOutClick={handleLogOutClick} />\r\n            <Header>\r\n              <div className=\"header__container\">\r\n                <p className=\"header__email\">{userEmail}</p>\r\n                <Link onClick={handleLogOutClick} className=\"header__signout\" to=\"/sign-in\">Выйти</Link>\r\n              </div>\r\n              <button onClick={handleHeaderButtonClick} className={`header__button ${!isLogOutPopupOpen ? '' : 'header__button_active'}`} type=\"button\"></button>\r\n            </Header>\r\n            <ProtectedRoute exact path=\"/\"\r\n              component={Main}\r\n              onEditProfile={handleEditProfileClick}\r\n              onAddPlace={handleAddPlaceClick}\r\n              onEditAvatar={handleEditAvatarClick}\r\n              onCardClick={handleCardClick}\r\n              handleCardLike={handleCardLike}\r\n              handleCardDelete={handleCardDelete}\r\n              cards={cards}\r\n              loggedIn={loggedIn}\r\n            />\r\n            <Footer />\r\n            <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\r\n            <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\r\n            <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\r\n            <PopupWithForm title={'Вы уверены?'} name={'confirm'} children={\r\n              <>\r\n              </>\r\n            } />\r\n            <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n          </Route>\r\n          <Route path=\"/sign-in\">\r\n            <Login handleLogin={handleLogin} />\r\n          </Route>\r\n          <Route path=\"/sign-up\">\r\n            <Register handleRegister={handleRegister}/>\r\n            <InfoToolTip isLogOutPopupOpen={isLogOutPopupOpen} closeAllPopups={closeAllPopups} popupError={popupError} textSuccess={'Вы успешно зарегистрировались'} textFail={'Что-то пошло не так! Попробуйте еще раз.'} />\r\n          </Route>\r\n          <Route>\r\n            {loggedIn ? <Redirect to=\"/content\" /> : <Redirect to=\"/sign-in\" />}\r\n          </Route>\r\n        </Switch>\r\n      </CurrentUserContext.Provider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","export const register = (email, password) => {\r\n  const BASE_URL = 'https://auth.nomoreparties.co'\r\n\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      \"password\": password,\r\n      \"email\": email\r\n    })\r\n  })\r\n    .then((res) => {\r\n      if (res.ok) {\r\n        return res.json()\r\n      }\r\n      return Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n    }\r\n    )\r\n}\r\n\r\nexport const login = (email, password) => {\r\n  const BASE_URL = 'https://auth.nomoreparties.co'\r\n\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      \"password\": password,\r\n      \"email\": email\r\n    })\r\n  })\r\n    .then((res) => {\r\n      if (res.ok) {\r\n        return res.json()\r\n      }\r\n      return Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n    }\r\n    )\r\n}\r\n\r\nexport const authTokenCheck = (token) => {\r\n  const BASE_URL = 'https://auth.nomoreparties.co'\r\n\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\": `Bearer ${token}`\r\n    },\r\n  })\r\n    .then((res) => {\r\n      console.log(res)\r\n      if (res.ok) {\r\n        return res.json()\r\n      }\r\n      return Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n    }\r\n    )\r\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}